(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{328:function(e,s,t){"use strict";t.r(s);var a=t(7),r=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h4",{attrs:{id:"docker的基本组成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker的基本组成"}},[e._v("#")]),e._v(" Docker的基本组成")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://images.whcoding.com/73600-4k8lz4i4zi8.png",alt:"73600-4k8lz4i4zi8.png"}})]),e._v(" "),s("ul",[s("li",[e._v("镜像(Image): docker镜像, 就相当于是镜像模板, 比如官方镜像Ubuntu:16.04就包含了完整的一套Ubuntu16.4最小系统 可以通过镜像来创建一个或多个容器.")]),e._v(" "),s("li",[e._v("容器(Container): 镜像和容器的关系, 就像面向对象程序设计种的类和对象一样, 镜像是静态的定义, 容器时镜像运行时的实体, 容器可以被创建 启动 停止 删除 暂停等.")]),e._v(" "),s("li",[e._v("仓库(Repository): 仓库可看成一个代码控制中心, 用来保存镜像. 仓库分为公有仓库和私有仓库. 其中"),s("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("DockerHub"),s("OutboundLink")],1),e._v("就是docker官方的仓库地址")])]),e._v(" "),s("h4",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker官方文档"),s("OutboundLink")],1),e._v(" 我的系统是 ubuntu 所以接下来的教程都是在 ubuntu 中安装的")]),e._v(" "),s("ol",[s("li",[e._v("卸载旧的版本")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo apt-get remove docker docker-engine docker.io containerd runc\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("更新apt软件源并允许apt通过HTTPS使用仓库")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo apt-get update\n\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg-agent \\\n    software-properties-common\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("添加Docker的官方GPG密钥")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[e._v("设置Docker稳定版软件源")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('# 官方源, 国内安装比较慢推荐使用阿里云的\nsudo add-apt-repository \\\n   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable"\n\n# 阿里云软件源\nsudo add-apt-repository "deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br")])]),s("ol",{attrs:{start:"5"}},[s("li",[e._v("添加仓库后, 更新apt源索引 并且安装最新的 docker-ce 社区版")])]),e._v(" "),s("ul",[s("li",[e._v("安装时最好设置一下阿里云的镜像会快很多 "),s("a",{attrs:{href:"https://developer.aliyun.com/mirror/",target:"_blank",rel:"noopener noreferrer"}},[e._v("阿里云镜像源"),s("OutboundLink")],1)])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo apt-get update\n\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("ol",{attrs:{start:"6"}},[s("li",[e._v("启动docker")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo service docker start\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ol",{attrs:{start:"7"}},[s("li",[e._v("使用 docker version 判断是否安装成功")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://images.whcoding.com/36515-y5hleldy74.png",alt:"36515-y5hleldy74.png"}})]),e._v(" "),s("h3",{attrs:{id:"运行-hello-world"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行-hello-world"}},[e._v("#")]),e._v(" 运行 hello-world")]),e._v(" "),s("h4",{attrs:{id:"使用-docker-run-hello-world"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker-run-hello-world"}},[e._v("#")]),e._v(" 使用 docker run hello-world")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://images.whcoding.com/45087-h5ack7tnbnw.png",alt:"45087-h5ack7tnbnw.png"}})]),e._v(" "),s("ul",[s("li",[e._v("上图可以看到第一步运行 docker run hello-world 命令后先在本来没有在本地找到 hello-world 镜像")]),e._v(" "),s("li",[e._v("第二步开始去远程仓库拉去 hello-world 镜像, 拉去完成之后返回一串签名信息")]),e._v(" "),s("li",[e._v("第三步输出了 Hello from Docker! 表示已经完成了")])]),e._v(" "),s("h4",{attrs:{id:"docker-run-命令详细分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-run-命令详细分析"}},[e._v("#")]),e._v(" docker run 命令详细分析")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://images.whcoding.com/01534-qm17l6vxey.png",alt:"01534-qm17l6vxey.png"}})]),e._v(" "),s("h4",{attrs:{id:"查看下载的镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看下载的镜像"}},[e._v("#")]),e._v(" 查看下载的镜像")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker images\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://images.whcoding.com/01432-o3sc2ejyu9g.png",alt:"01432-o3sc2ejyu9g.png"}})]),e._v(" "),s("h4",{attrs:{id:"卸载-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载-docker"}},[e._v("#")]),e._v(" 卸载 docker")]),e._v(" "),s("ol",[s("li",[e._v("卸载Docker Engine, CLI和Containerd软件包")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo apt-get purge docker-ce docker-ce-cli containerd.io\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("手动删除docker的资源 比如: images, containers, volumes")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo rm -rf /var/lib/docker\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h4",{attrs:{id:"docker底层原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker底层原理"}},[e._v("#")]),e._v(" Docker底层原理")]),e._v(" "),s("blockquote",[s("p",[e._v("Docker是怎么工作的?")])]),e._v(" "),s("ul",[s("li",[e._v("Docker是一个 Client -  Server 结构的系统, Docker的守护进程运行在主机上, 通过 Socket从客户端访问")]),e._v(" "),s("li",[e._v("DockerServer 接收到 DockerClient的指令, 就会执行这个命令")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://images.whcoding.com/17909-x35oynbw52i.png",alt:"17909-x35oynbw52i.png"}})]),e._v(" "),s("blockquote",[s("p",[e._v("Docker为什么比虚拟机快")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://images.whcoding.com/59067-4cpj4c4zmml.png",alt:"59067-4cpj4c4zmml.png"}})]),e._v(" "),s("ol",[s("li",[e._v("Docker有着比虚拟机更少的抽象层")]),e._v(" "),s("li",[e._v("Docker利用的是宿主机的内核, 而 vm 需要 Guest OS.")]),e._v(" "),s("li",[e._v("所以说新建一个容器的时候 docker需要像虚拟机一个重新加载一个操作系统内核避免引导, 虚拟机加载GuestOS是分钟级的. 而docker是里面宿主机的操作系统, 省略了复杂的过程是秒级的.")])])])}),[],!1,null,null,null);s.default=r.exports}}]);