(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{332:function(s,a,e){"use strict";e.r(a);var n=e(7),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"什么是容器数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是容器数据卷"}},[s._v("#")]),s._v(" 什么是容器数据卷")]),s._v(" "),a("ul",[a("li",[s._v("docker的理念, 将应用和环境打包成一个镜像, 如果应用产生数据, 那么我们删除容器数据就会丢失.")]),s._v(" "),a("li",[s._v("所以我们需要数据可以持久化, 比如 mysql的数据可以存储在本地! 并且容器之间可以数据共享, 这就是数据卷技术.")])]),s._v(" "),a("h3",{attrs:{id:"使用数据卷挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用数据卷挂载目录"}},[s._v("#")]),s._v(" 使用数据卷挂载目录")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 命令中 -v 就是在挂载目录 主机目录:容器内目录\ndocker run -it -v /home/test:/home centos /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("可以使用 docker inspect 命令 查看挂载")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images.whcoding.com/50425-oaf25b0xjpe.png",alt:"50425-oaf25b0xjpe.png"}})]),s._v(" "),a("h3",{attrs:{id:"mysql容器实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql容器实战"}},[s._v("#")]),s._v(" mysql容器实战")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 命令详解\n# -d 后台运行\n# -p 端口映射 宿主机端口:容器内端口\n# -v 数据卷挂载\n# -e 环境配置\n# --name 容器名字\n\ndocker run -d -p 3333:3306 -v /home/docker/mysql/conf:/etc/mysql/conf.d -v /home/docker/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name my-mysql mysql\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("blockquote",[a("p",[s._v("假设我们将容器删除, 就会发现挂载到本地的数据劵依旧没有丢失, 这就实现了容器数据化持久功能")])]),s._v(" "),a("h3",{attrs:{id:"具名挂载和匿名挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具名挂载和匿名挂载"}},[s._v("#")]),s._v(" 具名挂载和匿名挂载")]),s._v(" "),a("blockquote",[a("p",[s._v("docker的挂载方式有三种 具名挂载和匿名挂载 指定路径挂载, 上面mysql实战中就使用了指定路径挂载")])]),s._v(" "),a("h4",{attrs:{id:"匿名挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#匿名挂载"}},[s._v("#")]),s._v(" 匿名挂载")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# -v 直接写容器内路径\n\ndocker run -d -P --name nginx01 -v /etc/nginx nginx\n\n# 启动容器后, 可以使用 docker volume ls 命令来查看所有卷\ndocker volume ls\nDRIVER              VOLUME NAME\nlocal               44bf15e29c95e85ab32f4d94c7e2766d0880d602342cf1ac00e3044c1c3415f8\nlocal               723cc8cf114d9d4bb4ca51092b11fccf2b29d0927739414938a2cde22de4e43e\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"具名挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具名挂载"}},[s._v("#")]),s._v(" 具名挂载")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# -v 卷名:容器内路径\ndocker run -d -P --name nginx02 -v juming:/etc/nginx nginx\n\n# 再次查看所有的卷\ndocker volume ls\nDRIVER              VOLUME NAME\nlocal               44bf15e29c95e85ab32f4d94c7e2766d0880d602342cf1ac00e3044c1c3415f8\nlocal               723cc8cf114d9d4bb4ca51092b11fccf2b29d0927739414938a2cde22de4e43e\nlocal               juming\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"查看匿名和具名挂载的目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看匿名和具名挂载的目录"}},[s._v("#")]),s._v(" 查看匿名和具名挂载的目录")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 使用 docker volume inspect 卷名来查看挂载的目录\n\ndocker volume  inspect 44bf15e29c95e85ab32f4d94c7e2766d0880d602342cf1ac00e3044c1c3415f8\n\n[\n    {\n        "CreatedAt": "2020-09-11T05:49:44Z",\n        "Driver": "local",\n        "Labels": null,\n        "Mountpoint": "/var/lib/docker/volumes/44bf15e29c95e85ab32f4d94c7e2766d0880d602342cf1ac00e3044c1c3415f8/_data",\n        "Name": "44bf15e29c95e85ab32f4d94c7e2766d0880d602342cf1ac00e3044c1c3415f8",\n        "Options": null,\n        "Scope": "local"\n    }\n]\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("/var/lib/docker/")]),s._v(" 目录就是docker的工作目录")]),s._v(" "),a("li",[s._v("在其中 "),a("code",[s._v("/var/lib/docker/volumes/")]),s._v(" 目录就是存放了 docker 的所有挂载卷")]),s._v(" "),a("li",[s._v("进入到目录中就可以看到挂载的目录了\n"),a("img",{attrs:{src:"https://images.whcoding.com/43432-ghe8velcfed.png",alt:"43432-ghe8velcfed.png"}})])]),s._v(" "),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-v 容器内路径            # 匿名挂载\n-v 卷名:容器内路径        # 具名挂载\n-v 宿主机路径:容器内路径   # 指定路径挂载  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);