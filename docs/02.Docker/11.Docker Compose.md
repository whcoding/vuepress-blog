---
title: Docker Compose
date: 2020-09-24 13:26:18
permalink: /pages/42cb4d/
categories:
  - Docker
tags:
  - Docker
author: 
  name: whcoding
  link: https://github.com/whcoding
---

### 简介
之前使用Docker 都是手动去操作单个容器 比如: 编写DockerFile 手动执行 build run 等操作, 这样的弊端是如果我们有很多服务的话一个一个的执行会很麻烦
所以使用Docker Compose来轻松高效的管理容器, 可以定义运行多个容器.

<!-- more -->

> Docker Compose 特性

- 定义, 运行多个容器.
- YAML file 配置文件.
- docker-compose 命令.

> 自己理解
compose是docker官方开源的项目, 需要安装.
比如有一个 web服务 我们需要安装 nginx, php, mysql, redis 多个容器,我们使用DockerFile一个一个的去写, 一个一个的去运行命令会非常的麻烦.

### 安装 docker-compose
- 官方提供的GitHub地址太慢,这里使用国内的镜像: [地址](https://get.daocloud.io/)
- 安装完成使用命令 docker-compose version 有版本信息表示安装成功

### 快速上手

- 参考官方[示例](https://docs.docker.com/compose/gettingstarted/#prerequisites)

1. 创建应用 app.py
2. Dockerfile 应用打包成镜像
3. docker-compose yaml文件 定义整个服务(所需的环境)
4. 启动compose项目 

#### 流程

1. 创建网络
2. 执行 docker-composer yaml
3. 启动服务

### docker-compose 配置编写规则

#### yaml 规则
- 参考官方[文档](https://docs.docker.com/compose/compose-file/)

```
#  yaml 有三层

version '' # 1.版本 对应docker版本
service '' # 2.服务
    服务1 : web
        # 服务配置
        image
        build
        network
    服务2 : redis
    .....

# 3.其他配置 网络/卷/全局规则
volumes:
networks:
configs:    

```