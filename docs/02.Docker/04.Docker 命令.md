---
title: Docker 命令
date: 2020-09-09 15:16:00
permalink: /pages/f983c6/
categories:
  - Docker
tags:
  - Docker
author: 
  name: whcoding
  link: https://github.com/whcoding
---

### Docker 常用命令

#### Docker 帮助命令
```
docker version # 显示docker的版本信息
docker info    # 显示docker的系统信息
docker 命令 --help  # 帮助命令
```
<!-- more -->

### 镜像命令 

#### docker images 查看主机上所有的镜像 
```
docker@docker-VirtualBox:~$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              bf756fb1ae65        8 months ago        13.3kB
```
1. 解释
- REPOSITORY 镜像的仓库源
- TAG        镜像的标签
- IMAGE ID   镜像的ID
- CREATED    镜像的创建时间
- SIZE       镜像的大小

2. 可选项
```
 -a  --all   # 列出所有镜像
 -q  --quiet # 只显示镜像的ID  
```

#### docker search 搜索镜像
```
docker search mysql
NAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
mysql                             MySQL is a widely used, open-source relation…   9945                [OK]
mariadb                           MariaDB is a community-developed fork of MyS…   3638                [OK]
mysql/mysql-server                Optimized MySQL Server Docker images. Create…   725                                     [OK]
percona                           Percona Server is a fork of the MySQL relati…   508                 [OK]
```
1. 可选项 -f, 过滤
```
docker search mysql -f STARS=3000
NAME                DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
mysql               MySQL is a widely used, open-source relation…   9945                [OK]
mariadb             MariaDB is a community-developed fork of MyS…   3638                [OK]
```

#### docker pull 拉去镜像
```
# 下载镜像 docker pull 镜像名称[:tag]
docker@docker-VirtualBox:~$ docker pull mysql
Using default tag: latest  # 如果不写 tag 默认就是 latest
latest: Pulling from library/mysql 
bf5952930446: Pull complete # 分层下载 docker image的核心 联合文件系统
8254623a9871: Pull complete
938e3e06dac4: Pull complete
ea28ebf28884: Pull complete
f3cef38785c2: Pull complete
894f9792565a: Pull complete
1d8a57523420: Pull complete
6c676912929f: Pull complete
3cdd8ff735c9: Pull complete
4c70cbe51682: Pull complete
e21cf0cb4dc3: Pull complete
28c36cd3abcc: Pull complete
Digest: sha256:6ded54eb1e5d048d8310321ba7b92587e9eadc83b519165b70bbe47e4046e76a # 签名
Status: Downloaded newer image for mysql:latest
docker.io/library/mysql:latest # 真实地址

# docker pull mysql 等于 docker pull  docker.io/library/mysql:latest
```

#### docker rmi 删除镜像
```
docker rmi 镜像名称 # 删除单个镜像
docker rmi 镜像id # 删除单个镜像
docker rmi 镜像id 镜像id 镜像id # 删除多个镜像
docker rmi -f $(docker images -ag) # 删除全部镜像
```


### 容器命令

#### docker run 新建容器并启动
```
docker run [可选参数] image

# 参数说明
--name="name" 容器名字
-d            后台方式运行
-it           使用交互方式运行, 进入容器内
-p            指定容器端口 -p 8080:8080
   -p ip:主机端口:容器端口
   -p 主机端口:容器端口 (常用)
   -P 容器端口 
-P 随机指定端口
```

#### docker ps 查看容器
```
# docker ps 命令
     # 列出正在运行的容器
-a   # 列出所有容器
-n=? # 列出最近创建的容器
-q   # 只显示容器编号 
```

#### docker rm 删除容器
```
docker rm 容器id  # 删除指定容器, 先停止容器才能删除, 强制删除 rm -f
docker rm $(docker ps -aq) # 删除所有容器
```

#### 启动和停止容器
```
docker start 容器id   # 启动容器
docker restart 容器id # 重启容器
docker stop 容器id    # 停止当前正在运行的容器
docker kill 容器id    # 强制停止当前容器
```

### Docker 其他常用命令

#### 查看日志
```
docker logs 容器id
 - tf 显示日志
 -- tail number 显示条数
```

#### 查看容器内部的进程信息
```
docker top 容器id
```

#### 查看镜像的元数据
```
docker inspect 容器id
```

#### 从容器内拷贝文件到主机上
```
docker cp 容器id:容器内路径 主机路径
```