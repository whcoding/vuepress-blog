---
title: 原型模式
date: 2022-10-10 21:32:26
permalink: /pages/f81aa8/
categories:
  - 设计模式
tags:
  - 
author: 
  name: whcoding
  link: https://github.com/whcoding
---
### 原型模式

- 创建型模式
- 作用:  原型模式的主要思想是基于现有的对象克隆一个新的对象出来
- 原型模式适用于大对象的创建, 创建一个大对象需要很大的开销如果每次new就会消耗很大原型模式仅需内存拷贝即可 这样就免去了类创建时重复的初始化操作



### 流程图

![image-20201026142612351](/Users/wenhao/Library/Application Support/typora-user-images/image-20201026142612351.png)

### 示例代码

抽象类代码: 这里主要是 __clone() 方法

```PHP
<?php

namespace App\Prototype;


abstract class BookPrototype
{
    /**
     * @var string
     */
    protected $title;

    /**
     * @var string
     */
    protected $category;

    /**
     * @abstract
     * @return void
     */
    abstract public function __clone();

    /**
     * @return string
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * @param string $title
     */
    public function setTitle($title)
    {
        $this->title = $title;
    }
}
```



### 实现类代码

```php
<?php

namespace App\Prototype;

class BarBookPrototype extends BookPrototype
{

    protected $category = 'Bar';

    public function __clone()
    {
      
    }
}
```



```PHP
<?php

use App\Prototype\BarBookPrototype;

require __DIR__.'/../../vendor/autoload.php';

$barBook = new BarBookPrototype();
$barBook->setTitle("测测");
echo $barBook->getTitle();

// 使用 clone
$cloneBarBook = clone $barBook;
echo "</br>";
echo $cloneBarBook->getTitle();
```

