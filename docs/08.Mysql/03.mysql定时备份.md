---
title: mysql定时备份
date: 2022-10-10 21:33:09
permalink: /pages/8531dc/
categories:
  - Mysql
tags:
  - 
author: 
  name: whcoding
  link: https://github.com/whcoding
---
### mysql定时备份



```sh
#!/bin/sh

# 查找三天前的备份的文件进行删除
find /website/back/database -mtime +3 -name "*.*" -exec rm -Rf {} \;

# 查询空目录并且删除
find /website/back/database/ -type d -empty|xargs -n 1 rm -rf;

# 数据库配置信息
DB_USER="root"
DB_PASS="etx6688,."
DB_HOST="127.0.0.1"

# 需要备份数据库数组
DB_NAME=("db_yitongxue")

# 其他配置
BIN_DIR="/usr/bin/"      # Mysql bin
BCK_DIR="/website/back/database"  #备份文件目录
DATE=`date +%F`

# 创建文件
mkdir -p $BCK_DIR/$DATE

# 执行代码
for var in ${DB_NAME[@]};
do
 $BIN_DIR/mysqldump --opt --single-transaction --master-data=2 -u$DB_USER -p$DB_PASS -h$DB_HOST $DB_NAME > $BCK_DIR/$DATE/db_$var.sql
done
```



